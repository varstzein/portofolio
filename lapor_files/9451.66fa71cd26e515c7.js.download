"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9451],{11343:function(e,t,a){a.d(t,{iJ:function(){return w},Zd:function(){return f},tS:function(){return O}});var n=a(2784),o=a(20982),r=a(51464),i=a(9782);let s=(e,t)=>t?t.toUpperCase():"ai"===e||"photo"===e?"JPG":"ZIP";var l=a(68623);let c=e=>{let{resource:t,file:a,option:n,size:o,action:r}=e,i=new URLSearchParams;return i.set("resource","".concat(t)),a&&n?(i.set("file",a),i.set("option","".concat(n))):o&&i.set("size","".concat(o)),r&&i.set("action",r),i.toString()},d=async e=>{let t=c(e),a=await fetch("/api/regular/download?".concat(t));return a.ok?{success:!0,data:await a.json()}:429===a.status?{success:!1,data:"DOWNLOAD_LIMIT_REACHED",metadata:"/download-limit"}:401===a.status||403===a.status||405===a.status?{success:!1,data:"AUTHENTICATION_ERROR"}:404===a.status?{success:!1,data:"NOT_FOUND"}:{success:!1,data:"UNKNOWN_ERROR"}};var u=a(81325),p=a(21620);let g=()=>{let{t:e}=(0,u.$G)("error"),{setToast:t}=(0,p.p)();return(0,n.useCallback)(a=>{if("DOWNLOAD_LIMIT_REACHED"===a.data&&"metadata"in a){window.location.href=a.metadata;return}if("AUTHENTICATION_ERROR"===a.data){window.location.href="/oauth-logout";return}"NOT_FOUND"===a.data&&t({type:"danger",message:e("notFound")}),"UNKNOWN_ERROR"===a.data&&t({type:"danger",message:e("unknown")})},[t,e])};var m=a(50096),h=a(21805);let b=()=>{let e=(0,m.II)(),t=(0,m.b9)();return(0,n.useCallback)(a=>{let n="ck_items_".concat(e||0),o=new Date().getTime()+48e4,r=h.Z.get(n),i=r?JSON.parse(r):[];a&&-1==i.indexOf(a)&&i.push(a),h.Z.set(n,JSON.stringify(i),{path:"/",domain:t,expires:new Date(o)})},[e,t])},w=e=>{let{resource:t,file:a,action:c="download",location:u="resource_detail",option:p,size:m}=e,{id:h,name:w,author:y,premium:f,regularType:k}=t,[_,O]=(0,n.useState)(!1),{showAttribution:v}=(0,l.tc)(),x=b(),C=g(),R=(0,r.mS)(),j=(0,o.TH)({file_extension:s(k,a),file_name:w,file_id:h,license:f?"premium":"free",resolution:m?i.w8[m]:"original",style:"na",author_name:y.name,category:"ai"===k?"ai_image":k,action:"prompt"===c?"view_prompt":c,location:u}),I=(0,n.useCallback)(async()=>{O(!0);let e=await d({resource:h,size:m?2e3:void 0,action:c,file:a,option:p});if(e.success)return v&&v(),O(!1),x(h),R({resourceId:h,premiumResource:f,resourceType:k,downloadType:c}),j(),e.data;C(e),O(!1)},[h,m,c,a,p,C,v,x,R,f,k,j]);return{handleDownload:I,isDownloading:_}};var y=a(93854);let f=e=>{let{isDownloading:t,handleDownload:a}=w(e),o=(0,y.Jb)(),r=(0,n.useCallback)(async e=>{e.preventDefault();let t=e.currentTarget;if(!t)return;let n=await a();n&&(n.filename&&(t.download=n.filename),t.href=n.url,t.click(),o())},[a,o]);return{isDownloading:t,onClick:r}};var k=a(12043);let _=(e,t)=>{let a=document.createElement("a");t&&(a.download=t),a.href=e,a.click(),setTimeout(function(){a.remove()},200)},O=()=>{let{t:e}=(0,u.$G)(["detail","common"]),[t,a]=(0,n.useState)(!1),{setToast:o}=(0,p.p)(),r=(0,n.useCallback)(async(t,n,r,i,s,l)=>{let c=document.createElement("canvas");c.width=n,c.height=r;let d=c.getContext("2d");d&&(d.drawImage(t,0,0,n,r),c.toBlob(async t=>{if(t){if("clipboard"===i)try{(0,k.C)()||o({type:"danger",message:e("clipboardNotSupported")}),a(!0),await navigator.clipboard.write([new ClipboardItem({[t.type]:t})]),o({type:"success",title:e("detail:copyImageClipboard")||"Copy image to clipboard",message:e("common:copiedsuccessfully")})}catch(e){o()}finally{a(!1)}else{let e=window.URL.createObjectURL(t);_(e,l),window.URL.revokeObjectURL(e)}}},"image/".concat(s),1))},[o,e]),i=(0,n.useCallback)(async e=>{let{url:t,filename:a,width:n,height:i}=e;try{let e=new Image;e.src=t,e.crossOrigin="Anonymous",e.onload=()=>{r(e,n,i,"download","jpeg",a)},e.onerror=()=>o()}catch(e){o()}},[r,o]),s=(0,n.useCallback)(async e=>{let{url:t,width:n,height:i}=e;try{a(!0);let e=new Image;e.src=t,e.crossOrigin="Anonymous",e.onload=()=>{r(e,n,i,"clipboard","png")},e.onerror=e=>{a(!1),o()}}catch(e){a(!1),o()}},[o,r]);return{downloadImageSize:i,downloadCopyImageToClipboard:s,isCopying:t}}},59451:function(e,t,a){a.r(t),a.d(t,{DetailAsideAIContent:function(){return h}});var n=a(52322),o=a(56731),r=a(50096),i=a(25237),s=a.n(i),l=a(99124),c=a(93576),d=a(87146),u=a(53623);let p=s()(()=>a.e(4136).then(a.bind(a,34136)).then(e=>e.DetailMicrofunnel),{loadableGenerated:{webpack:()=>[34136]},ssr:!1,loading:()=>(0,n.jsx)(o.O.Rect,{style:{height:118}})}),g=s()(()=>a.e(8370).then(a.bind(a,58370)).then(e=>e.DetailDownload),{loadableGenerated:{webpack:()=>[58370]},ssr:!1,loading:()=>(0,n.jsx)(o.O.Rect,{style:{height:298},borderRadius:"none"})}),m=s()(()=>a.e(2544).then(a.bind(a,42544)).then(e=>e.DetailPrompt),{loadableGenerated:{webpack:()=>[42544]},ssr:!1,loading:()=>(0,n.jsx)(o.O.Rect,{style:{height:56}})}),h=()=>{let{hasPrompt:e,premium:t}=(0,l.ph)(),a=(0,r.HV)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p,{}),(0,n.jsx)("div",{"data-cy":"download-options-box",className:c.dK,children:(0,n.jsx)(g,{})}),e&&(0,n.jsx)(m,{}),(a||!t)&&(0,n.jsx)(d.K,{}),(0,n.jsx)(u.V,{})]})}},87146:function(e,t,a){a.d(t,{K:function(){return u}});var n=a(52322),o=a(2760),r=a(50096),i=a(12043),s=a(81325),l=a(2784),c=a(99124),d=a(11343);let u=e=>{let{label:t=!0}=e,{t:a}=(0,s.$G)("detail"),{id:u,name:p,author:g,premium:m,regularType:h,dimensions:{width:b,height:w}}=(0,c.ph)(),{isDownloading:y,handleDownload:f}=(0,d.iJ)({resource:{id:u,name:p,author:g,premium:m,regularType:h},size:"lg",action:"copy"}),{isCopying:k,downloadCopyImageToClipboard:_}=(0,d.tS)(),[O,v]=(0,l.useState)(),x=!O||y||k,C=(0,r.Jb)(),R=(0,l.useMemo)(()=>t?{size:"lg",block:!0}:{size:"sm",radius:"lg",square:!0},[t]),j=(0,l.useCallback)(async e=>{let t=e.currentTarget;if(t)try{let e=await f();if(!e)throw Error("Data is missing");_({url:e.url,width:b,height:w}),C()}catch(e){console.error("Error trying copy an Image. Status:",e)}},[f,_,b,w,C]);return(0,l.useEffect)(()=>{v((0,i.C)())},[]),(0,n.jsx)(o.gg,{"data-cy":"copy-image-button",color:"grayLight",onClick:j,opacity:x?"50":void 0,pointerEvents:x?"none":void 0,...R,children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.JO,{name:"CopyImage",size:"base",marginRight:"10"}),(0,n.jsx)("span",{children:a(y||k?"copying":"copyImage")})]}):(0,n.jsx)(o.JO,{name:"CopyImage",size:"base"})})}},53623:function(e,t,a){a.d(t,{V:function(){return O}});var n=a(52322),o=a(2760),r=a(40832),i=a(49326),s=a(78179),l=a(50096),c=a(81325),d=a(2784),u=a(20982),p=a(99124),g=a(11840),m=a(6096),h=a(21620),b=a(11343);let w={event:"ga4event",event_name:"tooltip_edit",action:"edit",location:"resource_detail"},y=()=>{let{t:e}=(0,c.$G)("detail"),{setToast:t}=(0,h.p)(),a=(0,g.nD)(),{id:r,name:i,author:s,premium:l,regularType:y}=(0,p.ph)(),{isDownloading:f,handleDownload:k}=(0,b.iJ)({resource:{id:r,name:i,author:s,premium:l,regularType:y},action:"edit"}),_=(0,m.J)(),O=(0,u.fD)(w),v=(0,d.useCallback)(async()=>{try{let e=await k();if(!e)throw Error("Data is missing");_(),O(),window.open("".concat("https://www.freepik.com/photo-editor/new-artboard","?photo=").concat(encodeURIComponent(null==e?void 0:e.url),"&from_view=detail&id=").concat(r))}catch(e){t(),console.error("Error trying open a WePik url. Status:",e)}},[k,_,O,r,t]);return(0,n.jsx)(o.u,{side:"bottom",container:a.current,alt:"Editor button",trigger:(0,n.jsxs)(o.gg,{color:"grayLight",size:"lg",block:!0,onClick:v,opacity:f?"50":void 0,pointerEvents:f?"none":void 0,children:[(0,n.jsx)(o.JO,{name:"Brush",color:"blueFreepik",size:"base",marginRight:"10"}),(0,n.jsx)(o.xu,{as:"span",color:"blueFreepik",children:e("editOnline")})]}),children:e("editOnlineTooltip")})},f={event:"ga4event",event_name:"tooltip_edit",action:"edit",location:"resource_detail"},k={location:"resource_detail_premium",action:"edit_premium_detail"},_=()=>{let{id:e}=(0,p.ph)(),{t}=(0,c.$G)("detail"),a=(0,u.fD)(f),l=(0,s.L3)(),[g,m]=(0,i.n9)(k),h=(0,d.useCallback)(()=>{a(),m();let t="".concat(l(r.WR.href),"/").concat(e);window.open(t,"_blank")},[m,a,l,e]);return(0,n.jsxs)(o.gg,{as:"button",color:"grayLight",size:"lg",block:!0,onClick:h,children:[(0,n.jsx)(o.JO,{name:"Brush",color:"blueFreepik",size:"base",marginRight:"10"}),(0,n.jsx)(o.xu,{as:"span",color:"blueFreepik",children:t("editOnline")})]})},O=()=>{let{premium:e}=(0,p.ph)(),t=(0,l.HV)();return!t&&e?(0,n.jsx)(_,{}):(0,n.jsx)(y,{})}}}]);